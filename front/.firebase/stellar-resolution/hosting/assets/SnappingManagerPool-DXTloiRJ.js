import{k3 as c,V as s,k4 as i,k5 as u,fg as l,F as p,G as f,k6 as d,k7 as g}from"./index-BCRx-hwS.js";const y=s.ofType(i);function m(t,e){const o=c(()=>{var n;return(n=t.map)==null?void 0:n.allLayers},n=>new i({layer:n}),{recycleItems:!0,createCollection:()=>new y}),a=new u({enabled:!0,selfEnabled:!1,featureEnabled:!0,featureSources:o,distance:e==null?void 0:e.distance,touchSensitivityMultiplier:(e==null?void 0:e.touchSensitivityMultiplier)??l.touchSensitivityMultiplier});return{...p(o),options:a}}const r=new Map;function C(t){if(!r.has(t)){const a=m(t,{distance:10}),n=M(t,a.options);r.set(t,{referenceCount:0,snappingManager:n,remove:()=>{a.remove(),n.destroy()}})}const e=r.get(t);e.referenceCount++;const o=f(()=>v(t,e));return{snappingManager:e.snappingManager,...o}}function v(t,e){e.referenceCount--,e.referenceCount>0||g(()=>{e.referenceCount===0&&(e.remove(),r.delete(t))})}function M(t,e){return new d({view:t,options:e})}export{C as a};
