import{b1 as p,db as s}from"./index-BCRx-hwS.js";import{t as l}from"./symbolUtils-3LpAap1x.js";import{e as d}from"./webStyleSymbolUtils-f_yBwCxr.js";import"./utils-DKCQA0Df.js";import"./cimSymbolUtils-CFsnI9l1.js";import"./mat2df32-Dpt2CT5P.js";import"./mat2d-BuXHlgXK.js";import"./devEnvironmentUtils-CnNDiFMM.js";async function x(i,e,t){var h;const r=(h=i.thumbnail)==null?void 0:h.url;if(r){const a=c((await p(r,{responseType:"image"})).data,t);return t!=null&&t.node?(t.node.appendChild(a),t.node):a}const m=await i.fetchSymbol({acceptedFormats:d});return m?e(m,t):null}function c(i,e){const t=!/\\.svg$/i.test(i.src)&&(e==null?void 0:e.disableUpsampling),r=Math.max(i.width,i.height);let m=(e==null?void 0:e.maxSize)!=null?s(e.maxSize):l.maxSize;t&&(m=Math.min(r,m));const h=typeof(e==null?void 0:e.size)=="number"?e==null?void 0:e.size:null,a=Math.min(m,h!=null?s(h):r);if(a!==r){const o=i.width!==0&&i.height!==0?i.width/i.height:1;o>=1?(i.width=a,i.height=a/o):(i.width=a*o,i.height=a)}return i}export{x as previewWebStyleSymbol};
