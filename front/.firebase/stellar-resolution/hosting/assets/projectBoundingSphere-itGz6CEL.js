import{cS as p,cT as I,cU as n,cV as f,au as C,cW as m,cX as A,cY as L}from"./index-BCRx-hwS.js";function _(r,u,t,c){if(u==null||c==null)return!1;const e=p(u,c);if((e==null?void 0:e.projector)==null)return!1;if(e.projector===I)return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],!0;const{source:s,dest:o,projector:R}=e;if(o.spatialReferenceId===n.WEB_MERCATOR){const a=f[s.spatialReferenceId][n.WGS84];return a!=null&&(a(r,0,E,0),m(E,0,t,0),t[3]=d(E[1],r[2],r[3],A.radius),!0)}if(s.spatialReferenceId!==n.WGS84&&s.spatialReferenceId!==n.CGCS2000||o.spatialReferenceId!==n.PLATE_CARREE){R(r,0,t,0);const a=s.metersPerUnit??1,i=o.metersPerUnit??1;t[3]=r[3]*a/i}else{const a=f[s.spatialReferenceId][n.SPHERICAL_ECEF],i=f[n.SPHERICAL_ECEF][n.PLATE_CARREE];let l=r[3];a!=null&&i!=null&&(l=d(r[1],r[2],r[3],A.radius)),R(r,0,t,0),t[3]=l}return!0}function d(r,u,t,c){const e=c+u;if(e<c/2||t>e)return Number.MAX_VALUE;const s=Math.abs(M*r)+Math.asin(t/e);return s>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(s)}const E=C(),M=L(1);export{_ as l};
